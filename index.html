<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Greece Property Intelligence – Chania</title>
  <style>
    body { font-family: system-ui, sans-serif; margin: 40px; background: #fafafa; }
    .card { background: white; padding: 24px; border-radius: 8px; max-width: 600px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
    h1 { margin-top: 0; }
    .metric { display: flex; justify-content: space-between; margin: 8px 0; }
    .signal { margin-top: 16px; padding: 12px; border-radius: 6px; background: #eee; }
    .note { margin-top: 20px; color: #555; font-size: 14px; }
  </style>
</head>
<body>

<div class="card">
  <h1 id="city">City</h1>
  <div id="date"></div>

  <h3>Market Snapshot</h3>
  <div class="metric"><span>Listings tracked</span><span id="listings"></span></div>
  <div class="metric"><span>Minimum price</span><span id="min"></span></div>
  <div class="metric"><span>25th percentile</span><span id="p25"></span></div>
  <div class="metric"><span>Median price</span><span id="median"></span></div>
  <div class="metric"><span>75th percentile</span><span id="p75"></span></div>
  <div class="metric"><span>Maximum price</span><span id="max"></span></div>

  <div id="signalBox" class="signal"></div>

  <div class="note">
    Data updated daily.  
    No listings. No ads. Built for foreign buyers.
  </div>
</div>

<script>
fetch("public_today.json")
  .then(r => r.json())
  .then(d => {
    document.getElementById("city").innerText = d.city + " – Greece";
    document.getElementById("date").innerText = "Snapshot: " + d.date;

    document.getElementById("listings").innerText = d.aggregates.listings;
    document.getElementById("min").innerText = "€" + d.aggregates.min.toLocaleString();
    document.getElementById("p25").innerText = "€" + d.aggregates.p25.toLocaleString();
    document.getElementById("median").innerText = "€" + d.aggregates.median.toLocaleString();
    document.getElementById("p75").innerText = "€" + d.aggregates.p75.toLocaleString();
    document.getElementById("max").innerText = "€" + d.aggregates.max.toLocaleString();

    const box = document.getElementById("signalBox");
    if (!d.signal) {
      box.innerText = "Market signal: collecting history…";
    } else {
      box.innerText = `Market signal: ${d.signal.label}
Median change: ${d.signal.p50_delta_pct.toFixed(2)}%
Supply change: ${d.signal.supply_delta_pct.toFixed(2)}%`;
    }
  });
</script>

</body>
</html>
